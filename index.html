
/* Floating Hearts Background */

setInterval(()=>{
const heart=document.createElement("div");
heart.innerHTML="â¤ï¸";
heart.className="heart-bg";
heart.style.left=Math.random()*100+"vw";
heart.style.fontSize=(15+Math.random()*25)+"px";
document.body.appendChild(heart);
setTimeout(()=>heart.remove(),6000);
},500);

/* Cursor Hearts */

document.addEventListener("mousemove",(e)=>{
const heart=document.createElement("div");
heart.innerHTML="â¤ï¸";
heart.className="cursor";
heart.style.left=e.pageX+"px";
heart.style.top=e.pageY+"px";
document.body.appendChild(heart);
setTimeout(()=>heart.remove(),400);
});

/* Typing System */

let typingInterval;

function typeText(text){

const el=document.getElementById("text");

if(typingInterval){
clearInterval(typingInterval);
}

let i=0;
el.innerHTML="";

typingInterval=setInterval(()=>{
el.innerHTML+=text.charAt(i);
i++;

if(i>=text.length){
clearInterval(typingInterval);
}

},35);
}

/* STORY SCRIPT */

const story=[

"Hi Betuâ€¦ â¤ï¸",

"I know thoda late ho gaya hu butâ€¦ it was very difficult to express my love through wordsâ€¦",

"Mujhe kabhi kabhi lagta hai ki main aapko properly batata hi nahi huâ€¦ ki aap mere liye kitne special hoâ€¦",

"Last ek saal meâ€¦ aap meri life ka sabse important part ban gaye hoâ€¦",

"Aap meri aadat meri jaan ban gaye hoâ€¦ and honestly mujhe yeh aadat bohot pasand haiâ€¦",

"Mujhe aapki har choti cheez bohot cute lagti haiâ€¦",

"Jaise aapka daantnaâ€¦",

"Jaise aapka meri care karnaâ€¦",

"Jaise aapka mujhpe gussa honaâ€¦ aur phir khud hi normal ho janaâ€¦",

"Aur sabse cuteâ€¦ aapka mujhpe haq jatanaâ€¦",

"Mere liye aapke saath ke saare moments bohot special haiâ€¦",

"Random baateâ€¦ random hasiâ€¦ random planning jo kabhi complete nahi hoti ðŸ˜‚",

"I know mai express nahi kartaâ€¦",

"Par iska matlab yeh nahi ki mai aapse pyaar nahi kartaâ€¦",

"Sach boluâ€¦ toh main aapko sab kuch maanta huâ€¦",

"Aap mera peace place hoâ€¦",

"Mujhe aapke saath ladna bhi acha lagta haiâ€¦ kyunki uske baad mujhe jada pyaar milta haiâ€¦",

"Aur honestlyâ€¦ mera bhi pyaar roj roj aur badhte ja raha hai..",

"I know Main perfect boyfriend nahi huâ€¦",

"Par main genuinely koshish karta huâ€¦ aur karta rahungaâ€¦",

"Because I love you app mere liye most precious hoâ€¦",

"Aur main aapko hamesha khush dekhna chahta huâ€¦",

"Valentine week aagaya haiâ€¦",

"Aur maine abhi tak aapko ask out nahi kara hai.. so !!â€¦"

];

const proposalText="Betuâ€¦ will you be my Valentineâ€¦ again? â¤ï¸â¤ï¸";

/* Story Flow */

let step=0;

function changeImage(imageNumber){

const img=document.getElementById("image");

img.classList.add("fadeOut");

setTimeout(()=>{
img.src=`img${imageNumber}.jpg`;
document.getElementById("bg").style.backgroundImage=`url(img${imageNumber}.jpg)`;

img.classList.remove("fadeOut");

},400);

}

function updateScreen(){
changeImage(step+1);
typeText(story[step]);
}

updateScreen();

/* NEXT BUTTON ONLY */

document.getElementById("nextBtn").onclick=nextSlide;

function nextSlide(){

document.getElementById("music").play();

step++;

if(step<story.length){
updateScreen();
}else{
showFinal();
}

}

function showFinal(){

typeText(proposalText);
changeImage(story.length+1);

document.getElementById("nextBtn").classList.add("hidden");
document.getElementById("finalButtons").classList.remove("hidden");

}

/* YES FLOW */

function yesClick(){

changeImage(story.length+2);

document.getElementById("finalButtons").classList.add("hidden");

confetti({
particleCount:200,
spread:110,
origin:{y:0.6}
});

}

/* NO FLOW */

let noIndex=0;

const noFlow=[
"Arey please Betuâ€¦",
"Itna bhi bura nahi hu main ðŸ˜­",
"Ek baar aur soch loâ€¦",
"Last chance please â¤ï¸"
];

function noClick(){

const noBtn=document.querySelector(".no");
const yesBtn=document.querySelector(".yes");

noBtn.innerText=noFlow[noIndex];
noIndex=(noIndex+1)%noFlow.length;

let size=parseFloat(window.getComputedStyle(yesBtn).fontSize);
yesBtn.style.fontSize=(size*1.4)+"px";

}
